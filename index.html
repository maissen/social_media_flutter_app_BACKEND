<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SocialConnect</title>

    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="auth-container" id="authContainer">
        <div class="auth-box">
            <h1>SocialConnect</h1>
            <p id="authSubtitle">Connect with friends and the world</p>

            <div id="authMessage"></div>

            <div id="loginForm">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="loginEmail" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="loginPassword" placeholder="Enter your password">
                </div>
                <button class="btn-primary" onclick="login()">Log In</button>
                <div class="auth-switch">
                    Don't have an account? <a onclick="showRegisterForm()">Sign Up</a>
                </div>
            </div>

            <div id="registerForm" style="display: none;">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="registerEmail" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" id="registerUsername" placeholder="Choose a username">
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="registerPassword" placeholder="Create a password">
                </div>
                <button class="btn-primary" onclick="register()">Sign Up</button>
                <div class="auth-switch">
                    Already have an account? <a onclick="showLoginForm()">Log In</a>
                </div>
            </div>
        </div>
    </div>

    <div class="app-container" id="appContainer">
        <nav class="navbar">
            <div class="navbar-content">
                <div class="navbar-brand">SocialConnect</div>
                <div class="navbar-menu">
                    <input type="text" class="navbar-search" id="searchInput" placeholder="Search users..." onkeypress="handleSearch(event)">
                    <div class="navbar-user">
                        <img id="navAvatar" src="https://via.placeholder.com/40" alt="User">
                        <span class="navbar-username" id="navUsername">User</span>
                        <button class="btn-logout" onclick="logout()">Logout</button>
                    </div>
                </div>
            </div>
        </nav>

        <div class="main-content">
            <aside class="sidebar">
                <div class="sidebar-card">
                    <h3 id="sidebarUsername">My Profile</h3>
                    <p id="sidebarBio" style="color: #65676b; font-size: 14px; margin-top: 8px;">Loading...</p>
                    <div class="profile-stats">
                        <div class="stat" style="cursor: pointer;" onclick="viewMyProfile()">
                            <div class="stat-value" id="postsCount">0</div>
                            <div class="stat-label">Posts</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="followersCount">0</div>
                            <div class="stat-label">Followers</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="followingCount">0</div>
                            <div class="stat-label">Following</div>
                        </div>
                    </div>
                </div>
                <div class="sidebar-card">
                    <h3>Navigation</h3>
                    <div style="display: flex; flex-direction: column; gap: 10px; margin-top: 15px;">
                        <button class="btn-primary" onclick="loadFeedPage()" style="padding: 10px;">Feed</button>
                        <button class="btn-primary" onclick="loadExplorePage()" style="padding: 10px;">Explore</button>
                        <button class="btn-primary" onclick="viewMyProfile()" style="padding: 10px;">My Profile</button>
                    </div>
                </div>
            </aside>

            <main class="feed-container">
                <div class="create-post-card" id="createPostCard">
                    <input type="text" class="create-post-input" placeholder="What's on your mind?" onclick="openCreatePostModal()" readonly>
                </div>

                <div id="feedContent">
                    <div class="loading">Loading your feed...</div>
                </div>
            </main>

            <aside class="sidebar">
            </aside>
        </div>
    </div>

    <div class="modal" id="createPostModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create Post</h2>
                <button class="modal-close" onclick="closeCreatePostModal()">&times;</button>
            </div>
            <div class="modal-body">
                <textarea id="createPostContent" placeholder="What's on your mind?"></textarea>
                <input type="file" id="createPostFile" accept="image/*" style="margin-bottom: 15px;">
                <button class="btn-primary" onclick="createPost()">Post</button>
            </div>
        </div>
    </div>

    <!-- Profile Modal -->
    <div id="profileModal" class="modal">
        <div class="modal-content profile-modal-content">
            <span class="close" onclick="closeProfileModal()">&times;</span>

            <!-- Profile Header -->
            <div class="profile-header">
                <div class="profile-avatar-wrapper">
                    <img id="profileModalAvatar" src="https://via.placeholder.com/120" alt="Profile Picture" class="profile-avatar">
                    <input type="file" id="profilePictureInput" accept="image/*" class="hidden-file-input">
                    <button class="btn-upload" onclick="document.getElementById('profilePictureInput').click()">Change</button>
                </div>
                <div class="profile-header-info">
                    <h2 id="profileModalUsername">Username</h2>
                    <p id="profileModalEmail">email@example.com</p>
                    <p id="profileModalBio" class="profile-bio-text">No bio yet</p>
                </div>
            </div>

            <!-- Edit Section -->
            <div id="profileEditSection" class="profile-edit-section">
                <input type="text" id="profileBioInput" placeholder="Update your bio" class="input-bio">
                <button class="btn-primary btn-update-bio" onclick="updateProfileBio()">Update Bio</button>
            </div>

            <!-- Profile Stats -->
            <div class="profile-stats">
                <div class="stat">
                    <span id="profileModalPosts" class="stat-value">0</span>
                    <span class="stat-label">Posts</span>
                </div>
                <div class="stat">
                    <span id="profileModalFollowers" class="stat-value">0</span>
                    <span class="stat-label">Followers</span>
                </div>
                <div class="stat">
                    <span id="profileModalFollowing" class="stat-value">0</span>
                    <span class="stat-label">Following</span>
                </div>
            </div>

            <!-- Profile Actions -->
            <div id="profileModalActions" class="profile-actions">
                <!-- Follow / Unfollow button dynamically injected -->
            </div>

            <!-- User Posts List -->
            <div id="profilePostsList" class="profile-posts">
                <div class="loading">Loading posts...</div>
            </div>
        </div>
    </div>



    <div class="modal" id="searchResultsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Search Results</h2>
                <button class="modal-close" onclick="closeSearchResultsModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="searchResultsList"></div>
            </div>
        </div>
    </div>

    <div class="modal" id="followersModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="followersModalTitle">Followers</h2>
                <button class="modal-close" onclick="closeFollowersModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="followersList"></div>
            </div>
        </div>
    </div>

    <div class="modal" id="likesModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Likes</h2>
                <button class="modal-close" onclick="closeLikesModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="likesList"></div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>